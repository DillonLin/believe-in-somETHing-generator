<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Believe in somETHing Generator</title>
  <meta property="og:title" content="Believe in somETHing" />
  <meta property="og:description" content="Join 200+ teams posting for Ethereum’s 10th birthday." />
  <meta property="og:image" content="/preview.png" />
  <meta property="og:url" content="https://believeinsomething.io" />
  <link rel="icon" type="image/png" href="eth_symbol_black.png" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f0f0f0;
    }
    .container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      flex-wrap: wrap;
      max-width: 1200px;
      margin-top: 2rem;
      padding: 1rem;
      gap: 2rem;
    }
    canvas {
      border: 1px solid #ccc;
    }
    .controls {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 400px;
    }
    label {
      font-weight: bold;
    }
    input[type="color"], input[type="file"], select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 6px;
    }
    button {
      padding: 0.75rem;
      border: none;
      background-color: #4CAF50;
      color: white;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
    }
    .toast {
      margin-top: 1rem;
      color: green;
      font-weight: bold;
      display: none;
    }
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <h1>Believe in somETHing Generator</h1>
  <div class="container">
    <canvas id="canvas" width="1600" height="900"></canvas>
    <div class="controls">
      <label for="bgColor">Step 1: Choose background color (HEX)</label>
      <input type="color" id="bgColor" value="#ffffff" />

      <label><input type="checkbox" id="useGradient" /> Use gradient?</label>

      <div id="gradientControls" style="display: none;">
        <label for="gradientStart">Gradient Start</label>
        <input type="color" id="gradientStart" value="#ffffff" />

        <label for="gradientEnd">Gradient End</label>
        <input type="color" id="gradientEnd" value="#000000" />

        <label for="gradientAngle">Gradient Angle</label>
        <select id="gradientAngle">
          <option value="0">0° (Top → Bottom)</option>
          <option value="90">90° (Left → Right)</option>
          <option value="135">135°</option>
          <option value="180">180° (Bottom → Top)</option>
          <option value="225">225°</option>
        </select>
      </div>

      <label for="fontColor">Step 2: Choose font color</label>
      <input type="color" id="fontColor" value="#000000" />

      <label for="ethIcon">Step 3: Choose an ETH logo image</label>
      <select id="ethIcon">
        <option value="eth_symbol_black.png">Black</option>
        <option value="eth_symbol_grey.png">Grey</option>
        <option value="eth_symbol_purple.png">Purple</option>
        <option value="eth_symbol_rainbow.png">Rainbow</option>
      </select>

      <label for="logoUpload">Step 4: Upload your logo (1:1 ratio)</label>
      <input type="file" id="logoUpload" accept="image/*" />

      <button onclick="downloadImage('png')">Download PNG</button>
      <button onclick="downloadImage('svg')">Download SVG</button>

      <div class="toast" id="toast">You’re ready to post. Join 200+ teams on July 29 at 7:00 AM UTC.</div>

      <label>Step 5: Download and post on July 29 at 7:00 AM UTC</label>

      <p>Optional: Want to create a custom template? <a href="https://www.figma.com/design/1uMOWnqYoLiT7r8UTXOcmz/Believe-in-SomETHing-Campaign-Coordination" target="_blank">View examples on Figma</a></p>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const toast = document.getElementById('toast');

    const bgColorInput = document.getElementById('bgColor');
    const fontColorInput = document.getElementById('fontColor');
    const logoUpload = document.getElementById('logoUpload');
    const ethIconSelect = document.getElementById('ethIcon');
    const useGradient = document.getElementById('useGradient');
    const gradientControls = document.getElementById('gradientControls');

    const gradientStart = document.getElementById('gradientStart');
    const gradientEnd = document.getElementById('gradientEnd');
    const gradientAngle = document.getElementById('gradientAngle');

    useGradient.addEventListener('change', () => {
      gradientControls.style.display = useGradient.checked ? 'block' : 'none';
      draw();
    });

    [bgColorInput, fontColorInput, logoUpload, ethIconSelect, gradientStart, gradientEnd, gradientAngle].forEach(el => {
      el.addEventListener('input', draw);
      el.addEventListener('change', draw);
    });

    function draw() {
      // Background
      if (useGradient.checked) {
        const angle = parseInt(gradientAngle.value) * Math.PI / 180;
        const x = Math.cos(angle) * canvas.width;
        const y = Math.sin(angle) * canvas.height;
        const grad = ctx.createLinearGradient(0, 0, x, y);
        grad.addColorStop(0, gradientStart.value);
        grad.addColorStop(1, gradientEnd.value);
        ctx.fillStyle = grad;
      } else {
        ctx.fillStyle = bgColorInput.value;
      }
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Text
      ctx.fillStyle = fontColorInput.value;
      ctx.font = '150px Roboto';
      ctx.textAlign = 'center';
      ctx.fillText('believe in som', canvas.width / 2 - 90, canvas.height / 2);

      const img = new Image();
      img.src = ethIconSelect.value;
      img.onload = () => {
        ctx.drawImage(img, canvas.width / 2 + 160, canvas.height / 2 - 120, 120, 120);
        ctx.fillText('ing', canvas.width / 2 + 260, canvas.height / 2);
      }

      // Logo (bottom right)
      if (logoUpload.files[0]) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          const logoImg = new Image();
          logoImg.onload = function() {
            ctx.drawImage(logoImg, canvas.width - 200, canvas.height - 200, 150, 150);
          };
          logoImg.src = evt.target.result;
        };
        reader.readAsDataURL(logoUpload.files[0]);
      }
    }

    function downloadImage(type) {
      draw();
      setTimeout(() => {
        if (type === 'png') {
          const a = document.createElement('a');
          a.download = 'believe-in-something.png';
          a.href = canvas.toDataURL();
          a.click();
        } else {
          alert('SVG export coming soon!');
        }
        confetti();
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 3000);
      }, 100);
    }

    draw();
  </script>
</body>
</html>
